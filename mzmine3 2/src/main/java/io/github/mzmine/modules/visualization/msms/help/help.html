<!--
  ~ Copyright 2006-2021 The MZmine Development Team
  ~
  ~ This file is part of MZmine.
  ~
  ~ MZmine is free software; you can redistribute it and/or modify it under the terms of the GNU
  ~ General Public License as published by the Free Software Foundation; either version 2 of the
  ~ License, or (at your option) any later version.
  ~
  ~ MZmine is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
  ~ the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License along with MZmine; if not,
  ~ write to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  ~
  -->

<html>
<head>
    <title>Visualization - MS/MS visualizer</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" type="text/css" href="/net/sf/mzmine/desktop/impl/helpsystem/HelpStyles.css">
</head>
<body>

<h1>MS/MS visualizer</h1>

<h2>Description</h2>

<p>
    This tool displays a three-dimensional plot of the MSn data. The are 4 options for X and Y axes:
    retention time, precursor ion m/z, product ion m/z, neutral loss and 3 options for Z axis:
    precursor ion intensity, product ion intensity, retention time. You can filter ions by
    the product intensity and select ions for diagnostic fragmentation filtering in parameters.
    Also module enables you to highlight values of interest and sort ions by Z value.
</p>

<h3>Diagnostic fragmentation filtering</h3>

<p>
    Due to common structural features, compounds within the same class undergo similar MS/MS fragmentation
    and as a result of many identical product ions and/or neutral losses.
    Diagnostic fragmentation filter (product ion filter) is a post-acquisition approach to screen
    LC-MS/MS datasets for entire classes of both known and unknown natural products. This tool searches
    all MS/MS spectra for product ions and/or neutral losses that has defined as being diagnostic for
    the entire class of compounds. In other words it screens LC-MS/MS datasets for MS/MS spectra
    containing production ions and/or neutral losses that are specific to that class of compounds.

    The user defines the diagnostic product ions and/or the diagnostic neutral loss values (Da) to
    use in the filtering. The user can also define the minimum diagnostic ion intensity (% base peak)
    to use in the filtering.If a recurrent neutral loss occurs, a line pattern in the plot can be observed.
    If compounds carrying those diagnostic product ions and/or the neutral loss values are detected
    the resulting plot will show their product ion m/z and precusor ion m/z. Additionally, an output
    file may be specified that will output the results of the filtering.
    For a detailed view of diagnostic fragmentation filtering:
    <a href=https://onlinelibrary.wiley.com/doi/abs/10.1002/rcm.8306>Walsh, Jacob P., et al.
        "Diagnostic Fragmentation Filtering for the Discovery of New Chaetoglobosins and Cytochalasins."
        Rapid Communications in Mass Spectrometry (2018)</a>.
</p>

<p>
    This tool is very useful to get an overview of large amounts of MS/MS data.
</p>

<p>
    <img src="msms_visualizer.png" alt="MS/MS Visualizer" style="width:60%;">
</p>

<h4>Parameters</h4>

<dd>
    <dt>Raw data file</dt>
    <dd>Selection of the raw data file to visualize. Only one file can be selected.

    <dt>X axis</dt>
    <dd>Selection of the X axis. There are 4 options:
    <ul>
        <li>Retention time</li>
        <li>Precursor ion m/z</li>
        <li>Product ion m/z</li>
        <li>Neutral loss</li>
    </ul>
    </dd>

    <dt>Y axis</dt>
    <dd>Selection of the Y axis. Options are the same as for X axis.</dd>

    <dt>Z axis</dt>
    <dd>Selection of the Z axis. There are 3 options:
    <ul>
        <li>Precursor ion intensity</li>
        <li>Product ion intensity</li>
        <li>Retention time</li>
    </ul>
    </dd>

    <dt>MS level</dt>
    <dd>MS level of the scans to be plotted.</dd>

    <dt>Retention time</dt>
    <dd>Retention time range.</dd>

    <dt>m/z range</dt>
    <dd>Range of m/z values for precursor ions in MSn scans.</dd>

    <dt>m/z tolerance</dt>
    <dd>Maximum allowed difference between two m/z values to be considered same.</dd>

    <dt>Intensities filtering</dt>
    <dd>Optional parameter to filter ions by intensity. There are 3 different options:
        <ul>
            <li>Number of best fragments - Number of ions with highest intensities from each scan to be visualized.
                <br>For example 5(for each scan 5 ions with highest intensities will be plotted).</li>
            <li>Base peak percent, % - Ions with intensity values lower than given percent of base peak intensity will be plotted.
                <br>For example 95(ions with intensity values lower than 0.95 multiplied by base peak intensity will not be plotted).</li>
            <li>Intensity threshold - Ions having intensities lower than given value will not be plotted.
                <br>For example 6.0E6(ions with intensity values lower than 6.0E6 will not be plotted).</li>
        </ul>
    </dd>

    <dt>Diagnostic fragmentation filtering</dt>
    <dd>Optional parameter for diagnostic fragmentation filtering described above. Has 2 subparameters:
        diagnostic product ions and diagnostic neutral loss values. Scans not containing any ion
        satisfying all input values will not be considered for the visualization.</dd>

</dl>

<h4>Functionality</h4>
<p>
    This plot is using the third part library JfreeChart for its basic functionality.
    <ul>
        <li>Drag the mouse from left to right - selecting the area to zoom</li>
        <li>Drag the mouse from right to left - zoom out</li>
        <li>Select combo boxes below - change axes types</li>
        <li>Hold the mouse on data point - show detailed information in a tooltip</li>
        <li>Double click on data point - show spectrum plot</li>
        <li><img src="highlight_points_btn.png"> - highlight ions with specific values given by input
            ranges with colors(Note: green color denotes ions satisfying both ranges)</li>
        <img src = "msms_visualizer_highlight.png" style="width:60%;">
        <li><img src="sort_z_asc_btn.png"> - show points with higher Z values in front</li>
        <img src = "msms_visualizer_sortz_asc.png" style="width:60%;">
        <li><img src="sort_z_desc_btn.png"> - show points with lower Z values in front</li>
        <img src = "msms_visualizer_sortz_desc.png" style="width:60%;">
    </ul>
</p>

</body>
</html>
